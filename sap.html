<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
<style>

.heading{

  background-color: white;
  color: black;



}

.center{

  margin:auto;
  width:50%;
}




</style>

<body style="background-image: url('image2.jpg');   background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
  background-size: cover;" ng-app="myApp" background-image="url(image2.jpeg)">

<div ng-controller="myCtrl">


  <!-- start of html -->
    <div ng-show="homepage">
    <div class="row heading">
    <h1  style="margin:auto;width:50%;"> Developer Conference Booking Application </h1>
    </div>

<div class="row center">

<h3 class="center" style="font-family: cursive; margin-top:10%;">Let us know who you are!</h3>
  </div>


    <div class="row" style="margin-top:2%">
    <div class="col-md-4">

<button type="button" style="float:right" class="btn btn-info btn-lg" ng-click="organiserFunction()">Organiser</button>

      </div>

    <div class="col-md-3">



    </div>


    <div class="col-md-4 ">

      <button type="button" class="btn btn-info btn-lg" ng-click="guestFunction()">Guest</button>



    </div>

    </div>
  </div>


   <div class="container" ng-show="showguest">


      <div style="margin-top:2%">
        <h2>Welcome Guest!!</h2>

   <div class="row" style="margin-top:2%; display: block"> 

 <div class="row">
  <h5 >Available Locations:</h5>
</div>
   <div class="row" style="margin-top:2%">
<div ng-repeat="(key, value) in data" style="margin-right: 4%;">
 
  <label >
       <input type="radio" name="guestlocation1" ng-model="project.guesttitle" ng-value="key" />&nbsp; &nbsp; {{key}}
         </label>


</div>
      </div>
</div>

 <div class="row"  style="margin-top:2%">
  <h5 >Available Topics:</h5>
</div>
 <div class="row" style="margin-top:2%;margin-right: 4%;" >
<div  style="margin-right: 4%;" ng-repeat="(key2, value2) in data[project.guesttitle]">

  <label >
       <input type="radio" name="guestlocation13" ng-model="project.guesttitle2" ng-value="key2" />&nbsp; &nbsp; {{key2}}
         </label>

</div>

      </div>


 <div class="row"  style="margin-top:2%">
  <h5 >Available Timeslots:</h5>
</div>
 <div class="row" style="margin-top:2%;margin-right: 4%;">
<div style="margin-right: 4%;" ng-repeat="(key3, value3) in data[project.guesttitle][project.guesttitle2]">

  <label >
       <input type="radio" name="guestlocation12" ng-model="project.guesttitle3" ng-value="key3" />&nbsp; &nbsp; {{key3}}
         </label>

</div>

      </div>



 <div class="row"  style="margin-top:2%">
  <h5 >Available Seat:</h5>
</div>
 <div class="row" style="margin-top:2%;margin-right: 4%;">
<div style="margin-right: 4%;" ng-repeat="(key3, value3) in data[project.guesttitle][project.guesttitle2]">

  <label >
       <input type="radio" name="guestlocation14" ng-model="project.guesttitle4" ng-value="key4" />&nbsp; &nbsp; {{value3}}
         </label>

</div>

      </div>



    </div>
</div>

    <div class="container" ng-show="showorganiser">


      <div style="margin-top:2%">
        <h2>Welcome Organiser!!</h2>
        <!-- Trigger the modal with a button -->
        <button style="margin-top:2%" type="button" class="btn btn-info btn-lg" ng-click="showform=true">Create Session</button>

        <!-- Modal -->


        <div  style="margin-top:2%" ng-show="showform" class="container">
  <h2>Create a new session</h2>



      <label  style="margin-top:2%" class="control-label col-sm-2" >Location:</label>
      <div class="col-sm-10">
<select id="location1" ng-model="project.location" style="height: 37px;
    width: 66%;
    border-radius: 2%;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px">
    <option></option>
  <option value="Bangalore">Bngalore</option>
  <option value="Mumbai">Mumbai</option>
  <option value="Delhi">Delhi</option>

</select>
      </div>


 
      <label  style="margin-top:2%" class="control-label col-sm-2"  >Topic:</label>
      <div class="col-sm-10">
<select id="topic1" ng-model="project.topic" style="height: 37px;
    width: 66%;
    border-radius: 2%;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px"> <option></option>
  <option value="Artificial Intelligence">Artificial Intelligence</option>
  <option value="User Interface">User Interface</option>
  <option value="Cloud Learning">Cloud Learning</option>

</select>
      </div>
  


 
      <label  style="margin-top:2%" class="control-label col-sm-2">Time Slot:</label>
      <div class="col-sm-10">
<select id="time1"  ng-model="project.time" ng-change="alert('hi')" style="height: 37px; 
    width: 66%;
    border-radius: 2%;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px"> <option></option>
  <option value="10AM - 11AM">10AM - 11AM</option>
  <option value="11AM - 12PM">11AM - 12PM</option>
  <option value="12PM - 1PM">12PM - 1PM</option>
  <option value="1PM - 2PM">1PM - 2PM</option>

  <option value="2PM - 3PM">2PM - 3PM</option>

  <option value="3PM - 4PM">3PM - 4PM</option>
  <option value="4PM - 5PM">4PM - 5PM</option>

  <option value="5PM - 6PM">5PM - 6PM</option>

</select>
      </div>
   



      <label  style="margin-top:2%" class="control-label col-sm-2">Seating Capcity:</label>
      <div class="col-sm-10">
<select id="seat1" ng-model="project.seat" style="height: 37px;
    width: 66%;
    border-radius: 2%;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px"> <option></option>
  <option value="0 - 50">0 - 50</option>
  <option value="0 - 100">0 - 100</option>


</select>
      </div>
  


 
     <div  style="margin-top:2%" class="col-sm-offset-2 col-sm-10">
        <button type="submit" style="background-color:#17a2b8; color:white" ng-click="submitOrganiserForm()" class="btn btn-default">Submit</button>
      </div>

</div>


      </div>

<div>


</div>  




    </div>

  <!-- end of html -->









</div>












<script>
angular.module('myApp', [])
  .controller('myCtrl', ['$scope', function($scope) {
    $scope.count = 0;
    $scope.myFunc = function() {
      $scope.count++;
    };



    $scope.homepage = true;
    $scope.showorganiser = false;
    $scope.guest = false;

$scope.project = {};

  $scope.organiserFunction = function() {

      $scope.homepage = false;
      $scope.showorganiser = true;


    };

    $scope.guestFunction = function(){

  $scope.homepage = false;
      $scope.showorganiser = false;
      $scope.showguest = true;


$scope.data = JSON.parse(localStorage.getItem("OrganiserData"));

    };


    $scope.submitOrganiserForm = function(){

$scope.data = JSON.parse(localStorage.getItem("OrganiserData"));
$scope.dontrepeat = "";

if(localStorage.getItem("OrganiserData") != null){


       if($scope.data[$scope.project.location] != undefined){

        if($scope.data[$scope.project.location][$scope.project.topic] != undefined){

          if($scope.data[$scope.project.location][$scope.project.topic][$scope.project.time] != undefined){

            $scope.dontrepeat = "yes";
            bootbox.alert("Same Time Slot in the same Topic in the same Location already exists in the database.", function() {
  

                          });

return
}else{


$scope.testdata = {

  [$scope.project.time] : $scope.project.seat
};



$scope.data[$scope.project.location][$scope.project.topic][$scope.project.time] = $scope.project.seat ;
                  

 localStorage.setItem("OrganiserData", JSON.stringify($scope.data));       //set1   

 if($scope.dontrepeat != "yes"){
      bootbox.alert("All the data has been added. It will now appear in the Guest window. Please check.", function() {
  

});
}       

                   
   return                                       ;


// localStorage.getItem("OrganiserData")[$scope.location][$scope.topic].push($scope.organiserData);



}

        

       }else{


               $scope.organiserData = {
                  
              

                     [$scope.project.time] : 

                            $scope.project.seat
               }
                                          

                                           
                }


$scope.data[$scope.project.location][$scope.project.topic] = $scope.organiserData ;
                  

 localStorage.setItem("OrganiserData", JSON.stringify($scope.data));  //set2

 if($scope.dontrepeat != "yes"){
      bootbox.alert("All the data has been added. It will now appear in the Guest window. Please check.", function() {
  

});
}

     return  


       }
       else{


               $scope.organiserData = 
                  {

                  [$scope.project.topic ]: {

                     [$scope.project.time ]: 

                            $scope.project.seat 
                                          

                                            }

                                                  }

                                                      
                                                          ;

$scope.data[$scope.project.location] = $scope.organiserData ;
                  

 localStorage.setItem("OrganiserData", JSON.stringify($scope.data));  //set3

 if($scope.dontrepeat != "yes"){
      bootbox.alert("All the data has been added. It will now appear in the Guest window. Please check.", function() {
  

});
}

return
       }


     }else{

   

               $scope.organiserData = 
                  {[$scope.project.location] : {

                  [$scope.project.topic] : {

                     [$scope.project.time] : 

                            $scope.project.seat
                                          

                                            }

                                                  }

                                                      }
                                                            ;

localStorage.setItem("OrganiserData", JSON.stringify($scope.organiserData));  //set4

if($scope.dontrepeat != "yes"){
      bootbox.alert("All the data has been added. It will now appear in the Guest window. Please check.", function() {
  

});
}

return
     }

if($scope.dontrepeat != "yes"){
      bootbox.alert("All the data has been added. It will now appear in the Guest window. Please check.", function() {
  

});
}

   }



    


  }]);
</script>
</body>
</html>
